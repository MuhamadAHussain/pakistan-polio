<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>The health workers fighting polio in Pakistan, one house at a time</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="apple-touch-icon" href="apple-touch-icon.jpg">
    <link rel="canonical" href="https://interactive.aljazeera.com/aje/2024/pakistan-polio/" />
    <meta name="image" content="https://interactive.aljazeera.com/aje/2024/pakistan-polio/poster.jpg">
    <meta name="title" content="The health workers fighting polio in Pakistan, one house at a time">
    <meta name="description" content="More than 350,000 officials are part of Pakistan’s fight against polio. Most are field workers who go from door to door in testing conditions to administer oral vaccines.">
    <meta name="author" content="Al Jazeera" />
    <meta property="title" content="The health workers fighting polio in Pakistan, one house at a time" />
    <meta property="description" content="More than 350,000 officials are part of Pakistan’s fight against polio. Most are field workers who go from door to door in testing conditions to administer oral vaccines." />
    <meta property="image" content="https://interactive.aljazeera.com/aje/2024/pakistan-polio/poster.jpg" />
    <meta property="og:title" content="The health workers fighting polio in Pakistan, one house at a time" />
    <meta property="og:description" content="More than 350,000 officials are part of Pakistan’s fight against polio. Most are field workers who go from door to door in testing conditions to administer oral vaccines." />
    <meta property="og:image" content="https://interactive.aljazeera.com/aje/2024/pakistan-polio/poster.jpg" />
    <meta property="og:type" content="article.other" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@AJEnglish" />
    <meta property="twitter:title" content="The health workers fighting polio in Pakistan, one house at a time" />
    <meta property="twitter:description" content="More than 350,000 officials are part of Pakistan’s fight against polio. Most are field workers who go from door to door in testing conditions to administer oral vaccines." />
    <meta property="twitter:image:src" content="https://interactive.aljazeera.com/aje/2024/pakistan-polio/poster.jpg" />
    <script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage":{
        "@type":"WebPage",
        "@id":"https://interactive.aljazeera.com/aje/2024/pakistan-polio/"
    },
    "headline": "The health workers fighting polio in Pakistan, one house at a time",
    "image": {
        "@type": "ImageObject",
        "url": "https://interactive.aljazeera.com/aje/2024/pakistan-polio/poster.jpg",
        "height": 1000,
        "width": 1500
    },
    "datePublished": "2024-08-31T09:02:41Z",
    "dateModified": "2024-08-31T09:02:41Z",
    "author": {
        "@type": "Person",
        "name": "Alia Chughtai"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Al Jazeera",
        "logo": {
        "@type": "ImageObject",
        "url": "https://interactive.aljazeera.com/aje/2024/pakistan-polio/poster.jpg",
        "width": 250,
        "height": 40
        }
    },
    "description": "More than 350,000 officials are part of Pakistan’s fight against polio. Most are field workers who go from door to door in testing conditions to administer oral vaccines."
    }</script>

    <!-- Add before publishing -->
	<script>function OptanonWrapper() { } !function (t, e, a, n) { if (!new URLSearchParams(t.location.search).has("gb")) { const t = e.getElementsByTagName(a)[0], n = e.createElement(a); n.async = !0, n.src = "https://cdn.cookielaw.org/scripttemplates/otSDKStub.js", n.type = "text/javascript", n.charset = "UTF-8", n.setAttribute("data-document-language", "true"), n.setAttribute("data-domain-script", "602a83e6-bfb3-414b-866b-461b4fa31165"), t.parentNode.insertBefore(n, t) } }(window, document, "script");</script>
	<script>(function (w, d, s, l, i) {
			w[l] = w[l] || []; w[l].push({
				'gtm.start':
					new Date().getTime(), event: 'gtm.js'
			}); var f = d.getElementsByTagName(s)[0],
				j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
					'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
		})(window, document, 'script', 'dataLayer', 'GTM-PXSQMF3');
	</script>
    <!-- START: INSERT ALL CSS & SCRIPTS HERE-->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="js/intersection-observer.js"></script>
    <script src="js/scrollama.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700|Playfair+Display:400,900&display=swap">
    <!-- END: INSERT ALL CSS & SCRIPTS HERE-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>
    <!-- START: INSERT ALL OF YOUR CONTENT HERE-->
    

    <body>
        <div id="map"></div>
        <div id="mapInset"></div>
        <div id="story">
        </div>
        
        <script src="./config.js"></script>
        <script>
            var initLoad = true;
            var layerTypes = {
                fill: ["fill-opacity"],
                line: ["line-opacity"],
                circle: ["circle-opacity", "circle-stroke-opacity"],
                symbol: ["icon-opacity", "text-opacity"],
                raster: ["raster-opacity"],
                "fill-extrusion": ["fill-extrusion-opacity"],
                heatmap: ["heatmap-opacity"],
            };

            var alignments = {
                left: "lefty",
                center: "centered",
                right: "righty",
                full: "fully",
            };

            function getLayerPaintType(layer) {
                var layerType = map.getLayer(layer).type;
                return layerTypes[layerType];
            }

            function setLayerOpacity(layer) {
                var paintProps = getLayerPaintType(layer.layer);
                paintProps.forEach(function (prop) {
                    var options = {};
                    if (layer.duration) {
                        var transitionProp = prop + "-transition";
                        options = { duration: layer.duration };
                        map.setPaintProperty(layer.layer, transitionProp, options);
                    }
                    map.setPaintProperty(layer.layer, prop, layer.opacity, options);
                });
            }
            var story = document.getElementById("story");
            var features = document.createElement("div");
            features.setAttribute("id", "features");
            var header = document.createElement("div");

 if (config.ajlogo) {
    var ajlogo = document.createElement("div");
                    ajlogo.innerHTML = `
                    <br>
                    <a href="https://aljazeera.com" target="_blank">
                        <img src="aj-logo.png">
                    </a>
                    `
                    header.appendChild(ajlogo);
                }

            if (config.title) {
                var titleText = document.createElement("h1");
                titleText.innerText = config.title;
                header.appendChild(titleText);
            }

            if (config.subtitle) {
                var subtitleText = document.createElement("h2");
                subtitleText.innerText = config.subtitle;
                header.appendChild(subtitleText);
            }


            if (config.byline) {
                var bylineText = document.createElement("p");
                bylineText.innerText = config.byline;
                header.appendChild(bylineText);
            }


            if (header.innerText.length > 0) {
                header.classList.add(config.theme);
                header.setAttribute("id", "header");
                story.appendChild(header);
            }
            config.chapters.forEach((record, idx) => {
                var container = document.createElement("div");
                var chapter = document.createElement("div");

                if (record.title) {
                    var title = document.createElement("h3");
                    title.innerText = record.title;
                    chapter.appendChild(title);
                }
                if (record.image) {
                    var image = new Image();
                    image.src = record.image;
                    image.loading ="lazy";
                    chapter.appendChild(image);
                }
                if (record.description) {
                    var story = document.createElement("p");
                    story.innerHTML = record.description;
                    chapter.appendChild(story);
                }
                if (record.title2) {
                    var title2 = document.createElement("h3");
                    title2.innerText = record.title2;
                    chapter.appendChild(title2);
                }
                if (record.image2) {
                    var image2 = new Image();
                    image2.src = record.image2;
                    image2.loading ="lazy";
                    chapter.appendChild(image2);
                }

                if (record.imagecaption) {
                    var story = document.createElement("em");
                    story.innerHTML = record.imagecaption;
                    chapter.appendChild(story);
                }
                

                container.setAttribute("id", record.id);
                container.classList.add("step");
                if (idx === 0) {
                    container.classList.add("active");
                }

                chapter.classList.add(config.theme);
                container.appendChild(chapter);
                container.classList.add(alignments[record.alignment] || "centered");
                if (record.hidden) {
                    container.classList.add("hidden");
                }
                features.appendChild(container);
            });

            story.appendChild(features);

            var footer = document.createElement("div");

            if (config.footer) {
                var footerText = document.createElement("p");
                footerText.innerHTML = config.footer;
                footer.appendChild(footerText);
            }

            if (footer.innerText.length > 0) {
                footer.classList.add(config.theme);
                footer.setAttribute("id", "footer");
                story.appendChild(footer);
            }

            mapboxgl.accessToken = config.accessToken;

            const transformRequest = (url) => {
                const hasQuery = url.indexOf("?") !== -1;
                const suffix = hasQuery ? "&pluginName=scrollytellingV2" : "?pluginName=scrollytellingV2";
                return {
                    url: url + suffix,
                };
            };

            var map = new mapboxgl.Map({
                container: "map",
                style: config.style,
                center: config.chapters[0].location.center,
                zoom: config.chapters[0].location.zoom,
                bearing: config.chapters[0].location.bearing,
                pitch: config.chapters[0].location.pitch,
                interactive: false,
                transformRequest: transformRequest,
                projection: config.projection,
            });

            // Create a inset map if enabled in config.js
            if (config.inset) {
                var insetMap = new mapboxgl.Map({
                    container: "mapInset", // container id
                    style: "mapbox://styles/mapbox/dark-v10", //hosted style id
                    center: config.chapters[0].location.center,
                    // Hardcode above center value if you want insetMap to be static.
                    zoom: 3, // starting zoom
                    hash: false,
                    interactive: false,
                    attributionControl: false,
                    //Future: Once official mapbox-gl-js has globe view enabled,
                    //insetmap can be a globe with the following parameter.
                    //projection: 'globe'
                });
            }


            if (config.showMarkers) {
                var marker = new mapboxgl.Marker({ color: config.markerColor });
                marker.setLngLat(config.chapters[0].location.center).addTo(map);
            }

            // instantiate the scrollama
            var scroller = scrollama();

            map.on("load", function () {


//coordinate fixing
                map.addSource('radar', {
            'type': 'image',
            'url': './gfx/pakistanpoliobasemap.jpg',
            'coordinates': [

                //left top
                [58.268642, 37.268642],
                //right top
                [81.456484, 37.268642],
                //right bottom
                [81.456484, 23.21285],
                //left bottom
                [58.268642, 23.21285 ]
                
                
            ]
        });
        

        // ,
        // map.addSource('zoomed', {
        //     'type': 'image',
        //     'url': './gfx/yemenzoom.png',
        //     'coordinates': [

        //         //left top
        //         [42.086643, 16.590365],
        //         //right top
        //         [47.050453, 16.590365],
        //         //right bottom
        //         [47.050453, 12.459140 ],
        //         //left bottom
        //         [42.086643, 12.459140 ],
                
                

        //     ]
        // });

        map.addLayer({
            id: 'radar-layer',
            'type': 'raster',
            'source': 'radar',
            'paint': {
                'raster-fade-duration': 0,
            },
        });

        // map.addLayer({
        //     id: 'zoomed-layer',
        //     'type': 'raster',
        //     'source': 'zoomed',
        //     'paint': {
        //         'raster-fade-duration': 0,
        //     }
        // });


                if (config.use3dTerrain) {
                    map.addSource("mapbox-dem", {
                        type: "raster-dem",
                        url: "mapbox://mapbox.mapbox-terrain-dem-v1",
                        tileSize: 512,
                        maxzoom: 14,
                    });


            //         map.addSource('radar', {
            // 'type': 'image',
            // 'url': 'https://docs.mapbox.com/mapbox-gl-js/assets/radar.gif',
            // 'coordinates': [

            //         },


                    // add the DEM source as a terrain layer with exaggerated height
                    map.setTerrain({ source: "mapbox-dem", exaggeration: 1.5 });

                    // add a sky layer that will show when the map is highly pitched
                    map.addLayer({
                        id: "sky",
                        type: "sky",
                        paint: {
                            "sky-type": "atmosphere",
                            "sky-atmosphere-sun": [0.0, 0.0],
                            "sky-atmosphere-sun-intensity": 15,
                        },
                    });
                }

                // As the map moves, grab and update bounds in inset map.
                if (config.inset) {
                    map.on("move", getInsetBounds);
                }
                // setup the instance, pass callback functions
                scroller
                    .setup({
                        step: ".step",
                        offset: 0.5,
                        progress: true,
                    })
                    .onStepEnter(async (response) => {
                        var chapter = config.chapters.find((chap) => chap.id === response.element.id);
                        response.element.classList.add("active");
                        map[chapter.mapAnimation || "flyTo"](chapter.location);

                        if(chapter.nyt==true){
                        response.element.classList.add("sticky");
                        }
                        
                        
                        // Incase you do not want to have a dynamic inset map,
                        // rather want to keep it a static view but still change the
                        // bbox as main map move: comment out the below if section.
                        if (config.inset) {
                            if (chapter.location.zoom < 5) {
                                insetMap.flyTo({ center: chapter.location.center, zoom: 0 });
                            } else {
                                insetMap.flyTo({ center: chapter.location.center, zoom: 3 });
                            }
                        }
                        if (config.showMarkers) {
                            marker.setLngLat(chapter.location.center);
                        }
                        if (chapter.onChapterEnter.length > 0) {
                            chapter.onChapterEnter.forEach(setLayerOpacity);
                        }
                        if (chapter.callback) {
                            window[chapter.callback]();
                        }
                        if (chapter.rotateAnimation) {
                            map.once("moveend", () => {
                                const rotateNumber = map.getBearing();
                                map.rotateTo(rotateNumber + 180, {
                                    duration: 30000,
                                    easing: function (t) {
                                        return t;
                                    },
                                });
                            });
                        }
                    })
                    .onStepExit((response) => {
                        var chapter = config.chapters.find((chap) => chap.id === response.element.id);
                        response.element.classList.remove("active");
                        if (chapter.onChapterExit.length > 0) {
                            chapter.onChapterExit.forEach(setLayerOpacity);
                        }
                    });
            });

            //Helper functions for insetmap
            function getInsetBounds() {
                let bounds = map.getBounds();

                let boundsJson = {
                    type: "FeatureCollection",
                    features: [
                        {
                            type: "Feature",
                            properties: {},
                            geometry: {
                                type: "Polygon",
                                coordinates: [
                                    [
                                        [bounds._sw.lng, bounds._sw.lat],
                                        [bounds._ne.lng, bounds._sw.lat],
                                        [bounds._ne.lng, bounds._ne.lat],
                                        [bounds._sw.lng, bounds._ne.lat],
                                        [bounds._sw.lng, bounds._sw.lat],
                                    ],
                                ],
                            },
                        },
                    ],
                };

                if (initLoad) {
                    addInsetLayer(boundsJson);
                    initLoad = false;
                } else {
                    updateInsetLayer(boundsJson);
                }
            }

            function addInsetLayer(bounds) {
                insetMap.addSource("boundsSource", {
                    type: "geojson",
                    data: bounds,
                });

                insetMap.addLayer({
                    id: "boundsLayer",
                    type: "fill",
                    source: "boundsSource", // reference the data source
                    layout: {},
                    paint: {
                        "fill-color": "#fff", // blue color fill
                        "fill-opacity": 0.2,
                    },
                });
                // // Add a black outline around the polygon.
                insetMap.addLayer({
                    id: "outlineLayer",
                    type: "line",
                    source: "boundsSource",
                    layout: {},
                    paint: {
                        "line-color": "#000",
                        "line-width": 1,
                    },
                });
            }


            !function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();

            function updateInsetLayer(bounds) {
                insetMap.getSource("boundsSource").setData(bounds);
            }

            // setup resize event
            window.addEventListener("resize", scroller.resize);
            //cookies
            function cookiestrigger() {
                window.OneTrust.ToggleInfoDisplay()
            }
        </script>
        <!--Chartbeat AJE header -->
    <script type="text/javascript">
    window.onbeforeunload = function () {
  window.scrollTo(0, 0);
}
        var _sf_startpt = new Date().getTime();
      </script>

<script type="text/javascript">
    var _sf_async_config = {};
    /** CONFIGURATION START **/
    _sf_async_config.uid = 3291;
    _sf_async_config.domain = "aljazeera.com";
    _sf_async_config.useCanonical = true;
    _sf_async_config.sections = "Interactive";
    _sf_async_config.authors = "Interactive";
    /** CONFIGURATION END **/
    (function () {
      function loadChartbeat() {
        window._sf_endpt = new Date().getTime();
        var e = document.createElement("script");
        e.setAttribute("language", "javascript");
        e.setAttribute("type", "text/javascript");
        e.setAttribute("src", "//static.chartbeat.com/js/chartbeat.js");
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload =
        typeof window.onload != "function"
          ? loadChartbeat
          : function () {
              oldonload();
              loadChartbeat();
            };
    })();
  </script>

    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PXSQMF3" height="0" width="0"
            style="display:none;visibility:hidden"></iframe>
    </noscript>
</body>

</html>